import config from './config.js';

export const MESSAGES = {
  welcome: `👋 Привет! Это бот для распределения инвайтов в Sora.

🎬 **Sora** — это новая AI-платформа от OpenAI для генерации видео.

⚠️ **Важно:** Для активации инвайта нужен американский VPN!

Нажми на кнопку ниже, чтобы получить инвайт 👇`,

  rules: (codesRequired) => `📜 **Правила системы:**

1️⃣ Ты получишь 1 инвайт-код для регистрации на sora.com

2️⃣ После регистрации у тебя появится 4 собственных инвайт-кода

3️⃣ **Ты возвращаешь ${codesRequired} кода** обратно в бот (помогаешь другим)

4️⃣ Оставшиеся ${4 - codesRequired} кода оставляешь себе для друзей

⏰ Срок возврата: **48 часов** после получения инвайта

💡 Это система взаимопомощи — чем больше людей возвращают коды, тем быстрее растет очередь!

Согласен с условиями?`,

  inviteSent: (code, codesRequired) => `🎉 **Поздравляю! Твой инвайт-код:**

\`${code}\`

📝 **Инструкция:**
1. Подключи американский VPN 🇺🇸
2. Перейди на sora.com и зарегистрируйся
3. После регистрации у тебя появится 4 инвайт-кода
4. Вернись сюда и отправь **${codesRequired} кода** обратно

⏰ У тебя есть **48 часов** на возврат кодов

🔔 Бот напомнит о возврате через 24 часа

📨 Когда коды будут готовы — нажми кнопку ниже 👇

💝 Опционально (но буду рад):
• Подпишись на ${config.telegram.channel}
• Подпишись на ${config.telegram.soraUsername} в Sora`,

  waitingForCodes: (codesRequired) => `📨 **Отправка кодов**

Отправь мне **${codesRequired} инвайт-кода** текстом.

Формат: каждый код с новой строки
\`\`\`
код1
код2${codesRequired === 3 ? '\nкод3' : ''}
\`\`\`

Просто скопируй коды из Sora и отправь их мне.`,

  codesReceived: (totalCodes) => `✅ **Спасибо! Коды приняты!**

Ты вернул ${totalCodes} ${pluralize(totalCodes, 'код', 'кода', 'кодов')}.

🙏 Благодаря тебе система продолжает работать и помогать другим!

💝 Если еще не сделал, подпишись на:
• ${config.telegram.channel}
• ${config.telegram.soraUsername} в Sora

Удачи в создании видео! 🎬`,

  reminder: (hoursLeft, codesRequired) => `⏰ **Дружеское напоминание**

Ты получил инвайт в Sora ${48 - hoursLeft} часов назад.

Не забудь вернуть **${codesRequired} кода** в бот — другие участники тоже ждут!

⏱️ Осталось: **~${hoursLeft} часов**

📨 Чтобы отправить коды, нажми /start и выбери "Отправить коды"`,

  finalWarning: (codesRequired) => `⚠️ **Последнее напоминание**

У тебя остался ~1 час чтобы вернуть **${codesRequired} кода**.

Это не обязательно, но другие участники очереди надеются на твою помощь 🙏

Система работает на доверии — давай поддержим друг друга!

📨 Отправь коды: /start → "Отправить коды"`,

  addedToQueue: (position, poolSize) => `✅ **Ты добавлен в очередь!**

📊 Твоя позиция: **#${position}**
💎 Кодов в пуле: **${poolSize}**

${poolSize > 0 
  ? `🚀 Твоя очередь подойдет скоро! Как только освободится код, я сразу тебе отправлю.` 
  : `⏳ Пул пока пуст, но скоро появятся новые коды от участников.`}

📊 Проверить статус: /stats`,

  stats: (position, poolSize, queueSize, codesReturned) => {
    let statusText = '';
    
    if (position) {
      statusText = `📍 **Твоя позиция в очереди:** #${position}\n`;
    } else if (codesReturned > 0) {
      statusText = `✅ **Статус:** Ты вернул ${codesReturned} ${pluralize(codesReturned, 'код', 'кода', 'кодов')}\n`;
    } else {
      statusText = `📊 **Статус:** Участник системы\n`;
    }

    return `📊 **Статистика**

${statusText}
💎 Кодов в пуле: **${poolSize}**
👥 Человек в очереди: **${queueSize}**

${poolSize > queueSize 
  ? '🟢 Система здорова — кодов достаточно!' 
  : '🟡 Ждем возврата кодов от участников'}`;
  },

  alreadyInQueue: (position) => `ℹ️ Ты уже в очереди на позиции **#${position}**

Как только подойдет твоя очередь, я сразу отправлю инвайт!

📊 Проверить статус: /stats`,

  notInSystem: `❌ Ты еще не зарегистрирован.

Нажми /start чтобы начать!`,

  help: `ℹ️ **Справка**

**Команды:**
/start - Начать работу с ботом
/stats - Показать статистику
/help - Эта справка

**Как это работает:**
1. Запрашиваешь инвайт
2. Получаешь код для Sora
3. Регистрируешься на sora.com (с VPN 🇺🇸)
4. Возвращаешь часть своих кодов в бот
5. Помогаешь другим получить доступ!

**Вопросы?**
Пиши в ${config.telegram.channel}`,

  adminHelp: `🔧 **Админ команды:**

\`/addcodes код1 код2 код3\` - Добавить коды вручную
\`/poolsize\` - Размер пула
\`/queuesize\` - Размер очереди
\`/broadcast текст\` - Рассылка всем пользователям
\`/stats\` - Статистика системы`
};

function pluralize(n, one, few, many) {
  if (n % 10 === 1 && n % 100 !== 11) return one;
  if (n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20)) return few;
  return many;
}

export default MESSAGES;

